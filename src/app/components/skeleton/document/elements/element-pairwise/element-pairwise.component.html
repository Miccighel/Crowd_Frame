<!--
  Exclusive selection, card-only UI.
  Accessibility: role="radiogroup"/"radio", aria-checked, keyboard Enter/Space.
-->
<h2 class="pairwise-title"><span i18n>Select the most appropriate element</span></h2>

<form [formGroup]="documentSelectionForms[documentIndex]">
    <div class="pairwise-container" role="radiogroup" aria-label="Pairwise elements">

        @for (subdoc of task.documents[documentIndex].subdocuments; track subdoc ?? $index; let j = $index) {
            <div
                id="subdocument-{{documentIndex}}-{{j}}"
                class="element-box"
                role="radio"
                (click)="selectElement(documentIndex, j)"
                (keydown.enter)="selectElement(documentIndex, j)"
                (keydown.space)="selectElement(documentIndex, j)"
                [attr.tabindex]="0"
                [attr.aria-checked]="documentSelectionForms[documentIndex].get('element_' + j + '_selected')?.value"
                [class.selected]="documentSelectionForms[documentIndex].get('element_' + j + '_selected')?.value"
                [attr.aria-label]="'Element ' + (['A','B'][j] || (j + 1))">

                <!-- Simple radio-like indicator (purely visual) -->
                <span class="radio-indicator" aria-hidden="true"></span>

                <h2 class="element-box-title">
                    <span i18n>Element {{ ['A', 'B'][j] || (j + 1) }}</span>
                </h2>

                <div class="element-box-values">
                    @for (attribute of task.settings.attributesMain; track attribute.name; let k = $index) {
                        @if (attribute.show) {
                            <div class="element-value-caption">
                                <label><strong>{{ attribute.name_pretty || attribute.name }}</strong>:</label>
                                <span class="attr-value">{{ (subdoc[attribute.name] ?? 'â€”') }}</span>
                            </div>
                        }
                    }
                </div>
            </div>
        }
    </div>
</form>
