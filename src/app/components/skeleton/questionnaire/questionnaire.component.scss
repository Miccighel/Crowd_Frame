/* =========================
 * Questionnaire styles (simple, no CSS vars)
 * ========================= */

/* Disable clicks on stepper headers (preferred: wrap stepper in .no-click-headers) */
.no-click-headers .mat-horizontal-stepper-header {
    pointer-events: none;
}

/* Fallback if wrapper isn't used */
::ng-deep .mat-horizontal-stepper-header {
    pointer-events: none !important;
}

/* ---------- Card & title ---------- */
.questionnaire-card mat-card-title {
    padding-top: 8px;
    padding-bottom: 8px;
    margin-top: 8px;
    margin-bottom: 0;
    font-weight: 400;
    border-bottom: 1px solid rgba(0, 0, 0, 0.12);
    font-size: 24px;
}

/* Center the main title text */
.questionnaire-card .center-title {
    display: flex;
    justify-content: center;
    text-align: center;
    width: 100%;
    margin: 4px 0 12px;
    word-break: break-word;
}

/* Description & caption moved inside mat-card-title:
   align them LEFT and indent to match the first question text
   (.indent → border-left:2px + padding-left:12px = 14px). */
.questionnaire-card mat-card-title .questionnaire-description,
.questionnaire-card mat-card-title .questionnaire-caption {
    text-align: left;
    width: 100%;
    padding-left: 14px;
    margin: 6px 0 0 0;
    font-size: 16px;
    line-height: 1.4;
    color: #616161;
}

/* Ensure inner paragraph doesn't re-center */
.questionnaire-card mat-card-title .questionnaire-description .question-text,
.questionnaire-card mat-card-title .questionnaire-caption .question-text {
    text-align: left;
    margin: 0;
}

/* Card content/actions spacing */
.questionnaire-card mat-card-content {
    margin-top: 8px;
    margin-bottom: 8px;
}

.questionnaire-card mat-card-actions {
    margin: 16px auto 1em;
    width: 85%;
}

/* ---------- Navigation buttons spacing ---------- */
/* Modern: flex gap on the <p class="form-note"> container */
.questionnaire-card mat-card-actions .form-note {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px; /* spacing between Back / Next / Finish */
    justify-content: flex-end;
}

/* Small screens: center the buttons stack */
@media (max-width: 480px) {
    .questionnaire-card mat-card-actions .form-note {
        justify-content: center;
    }
}

/* Fallback (older browsers without flex gap) */
.questionnaire-card mat-card-actions .form-note > button + button {
    margin-left: 10px;
}

/* ---------- Controls & fields ---------- */
mat-form-field {
    width: 100%;
}

mat-checkbox {
    padding-top: 4px;
    padding-bottom: 4px;
    font-size: 1.05em;
}

/* ---------- Question blocks ---------- */
.questionnaire-standard {
    margin-bottom: 8px !important;
}

.question-text {
    font-size: 1.2em;
    font-weight: 400;
    margin: 0 0 8px 0; /* separation above the field */
}

.question-free-text-tall {
    margin-top: 8px;
}

.question-mcq span, .questionnaire-value {
    font-size: 1.1em;
}

.question-box {
    margin-bottom: 16px;
}

/* Indentation for nested blocks (defines the reference left edge = 14px above) */
.indent {
    margin-top: 8px;
    padding-left: 12px;
    border-left: 2px solid rgba(0, 0, 0, 0.12);
}

/* ---------- Checked summary ---------- */
.checked-summary {
    display: flex;
    align-items: center;
    margin-top: 8px;
    margin-bottom: 8px;
    font-size: 0.97em;
    color: #495057;
    background: #f8f9fa;
    border-radius: 6px;
    padding: 4px 8px;
}

.checked-summary .checked-summary-label {
    font-weight: 500;
    margin-right: 4px;
    color: #616161;
}

.checked-summary .checked-summary-values {
    font-style: italic;
    color: #1565c0;
}

/* ---------- Errors (Material + inline) ---------- */
.app-error-message,
.mat-error,
app-error-message,
.inline-error {
    display: block;
    color: #c62828;
    font-size: 0.95em;
    margin: 6px 0 4px 2px;
    min-height: 1.2em;
    line-height: 1.3;
    font-weight: 500;
}

/* Legacy app-error component directly under .question-box */
.question-box .app-error-message,
.question-box app-error-message {
    margin: 6px 0 0 0;
}

/* Inline error right after a checkbox-list group */
.question-box[formgroupname] + .inline-error {
    margin: 8px 0;
}

/* Hide unused field chrome when faking a mat field around checkboxes */
.question-checkbox-field .mat-form-field-infix,
.question-checkbox-field .mat-form-field-flex,
.question-checkbox-field .mat-form-field-underline {
    display: none !important;
}

.question-checkbox-field .mat-form-field-wrapper {
    padding: 0 !important;
}

/* ---------- Expansion panel (details) ---------- */
.question .question-detail {
    box-shadow: none;
}

.question-detail mat-panel-title {
    text-transform: uppercase;
    flex-grow: 0;
}

.question-detail mat-panel-description {
    font-weight: 400;
    text-align: left;
}

.question-detail mat-expansion-panel-header,
.question-detail mat-expansion-panel {
    padding-left: 0.75%;
}

/* ---------- Likert matrix ---------- */
.questionnaire-matrix {
    margin-top: 16px;
}

/* Sticky header (ensure the scroll container doesn't clip overflow) */
.questionnaire-matrix .matrix-header {
    position: sticky;
    top: 0; /* adjust if there’s a fixed toolbar */
    z-index: 10;
    background: inherit;
    display: flex;
}

/* Header labels */
.questionnaire-matrix .matrix-header-text,
.questionnaire-matrix .matrix-header-text-wide {
    font-size: 1.1em;
    padding-left: 0;
}

/* First column (question text) width */
.questionnaire-matrix .matrix-header div:first-child {
    text-align: left;
    flex-basis: 15%;
}

/* Header cells layout */
.questionnaire-matrix .matrix-header div {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-basis: 0;
    flex-grow: 1;
    flex-wrap: wrap;
    overflow-wrap: break-word;
}

/* Rows (radio groups) */
.questionnaire-matrix mat-radio-group {
    display: flex;
    justify-content: center;
    align-items: center;
    border-bottom: 1px solid rgba(0, 0, 0, 0.12);
}

/* First cell of each row aligns with the header */
.questionnaire-matrix mat-radio-group > div:first-child {
    flex-basis: 15%;
    justify-content: flex-start;
    text-align: left;
}

/* Generic radio cells */
.questionnaire-matrix mat-radio-group div {
    padding: 8px;
    flex-basis: 0;
    flex-grow: 1;
    display: flex;
    overflow-wrap: break-word;
    justify-content: center;
    align-items: center;
}

.questionnaire-matrix mat-radio-group > div p {
    margin: 0;
}

/* Wider mapping cells, when requested by mapping.spacing */
.questionnaire-matrix .radio-button-wide {
    padding-left: 20%;
}

/* Small screens: make Likert readable */
@media (max-width: 640px) {
    .questionnaire-matrix .matrix-header {
        position: static;
    }
    /* disable sticky on tiny screens */
    .questionnaire-matrix .matrix-header div:first-child,
    .questionnaire-matrix mat-radio-group > div:first-child {
        flex-basis: 40%; /* more room for question text */
    }
}
